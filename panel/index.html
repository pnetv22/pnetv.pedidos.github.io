<!DOCTYPE html>
<html>
<head>
    <title>Painel IPTV - pnetv22</title>
</head>
<body>
    <h1>Contas Tempor√°rias</h1>
    <button onclick="createAccount()">Criar Acesso (2h)</button>
    <div id="contas"></div>

    <script>
        // Carregar contas
        async function loadAccounts() {
            const response = await fetch('https://raw.githubusercontent.com/pnetv22/pnetv22.github.io/main/accounts.json?t=' + Date.now());
            const accounts = await response.json();
            document.getElementById('contas').innerHTML = accounts.map(acc => `
                <div>
                    <strong>${acc.username}</strong> - Expira em ${new Date(acc.expires_at).toLocaleString()}
                    <button onclick="deleteAccount('${acc.id}')">Excluir</button>
                </div>
            `).join('');
        }

        // Criar conta
        async function createAccount() {
            await fetch('https://api.github.com/repos/pnetv22/pnetv22.github.io/dispatches', {
                method: 'POST',
                headers: {
                    'Authorization': 'token SEU_TOKEN_GITHUB',
                    'Accept': 'application/vnd.github.everest-preview+json'
                },
                body: JSON.stringify({ event_type: 'create_temp_account' })
            });
            setTimeout(loadAccounts, 8000); // Aguarde 8s para o GitHub atualizar
        }

        // Excluir conta
        async function deleteAccount(id) {
            await fetch('https://api.github.com/repos/pnetv22/pnetv22.github.io/dispatches', {
                method: 'POST',
                headers: {
                    'Authorization': 'token SEU_TOKEN_GITHUB',
                    'Accept': 'application/vnd.github.everest-preview+json'
                },
                body: JSON.stringify({
                    event_type: 'delete_temp_account',
                    client_payload: { id }
                })
            });
            setTimeout(loadAccounts, 8000);
        }

        // Iniciar
        loadAccounts();
    </script>
</body>
</html>
